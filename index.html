<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Speed Stars</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #231F20;
    }
    #unity-container {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    canvas {
      width: 100%;
      height: 100%;
    }
    #play-button {
      position: absolute;
      z-index: 10;
      background: #28a745;
      color: white;
      border: none;
      padding: 20px;
      font-size: 24px;
      cursor: pointer;
    }
  </style>

  <!-- Preload Unity files -->
  <link rel="preload" href="Build/6127fbba3e79cbcada24ba1ffd033f77.data" as="fetch" type="application/octet-stream" crossorigin="anonymous">
  <link rel="preload" href="Build/fe2a5824416bebe1cc941510618103f9.wasm" as="fetch" type="application/wasm" crossorigin="anonymous">
  <link rel="preload" href="Build/b0e5ec181474d494c6ff3c9ad9c3b1bd.js" as="script" crossorigin="anonymous">
</head>
<body>
  <div id="unity-container">
    <canvas id="unity-canvas"></canvas>
  </div>

  <!-- Play Button -->
  <button id="play-button">Play</button>

  <!-- Mocking the Poki SDK Initialization -->
  <script>
    // Mocking the Poki SDK function initPokiBridge
    if (typeof window.initPokiBridge !== 'function') {
      window.initPokiBridge = function() {
        console.log('initPokiBridge is a mock function. It has not been implemented.');
      };
    }

    // Mock PokiUnitySDK initialization
    window.PokiUnitySDK = {
      Instance: {
        initialized: false, // flag to check if it's initialized
        Init: function() {
          console.log("PokiUnitySDK initialized");
          this.initialized = true;  // Set initialization flag to true
        },
        // Mock functions
        commercialBreak: function () {
          if (!this.initialized) {
            console.error("PokiUnitySDK is not initialized yet.");
            return;
          }
          console.log("Poki: commercialBreak");
        },
        gameplayStart: function () {
          if (!this.initialized) {
            console.error("PokiUnitySDK is not initialized yet.");
            return;
          }
          console.log("Poki: gameplayStart");
        },
        gameplayStop: function () {
          if (!this.initialized) {
            console.error("PokiUnitySDK is not initialized yet.");
            return;
          }
          console.log("Poki: gameplayStop");
        }
      }
    };

    // Simulate delayed initialization (e.g., waiting for Unity to load)
    function initializeSDK() {
      if (!window.PokiUnitySDK.Instance.initialized) {
        window.PokiUnitySDK.Instance.Init();
        console.log("PokiUnitySDK has been initialized successfully.");
      }
    }

    // Function to handle the play button
    function handlePlayButton() {
      if (!window.PokiUnitySDK.Instance.initialized) {
        console.log("SDK not initialized yet. Initializing...");
        initializeSDK(); // Initialize SDK if it's not already done
      }

      // Trigger gameplayStart only after initialization
      window.PokiUnitySDK.Instance.gameplayStart();
    }

    // Wait for the play button click event
    document.getElementById('play-button').addEventListener('click', handlePlayButton);
  </script>

  <!-- Unity loader -->
  <script src="Build/Build_v2-40w.loader.js"></script>

  <!-- Unity startup script -->
  <script>
    // Initialize Unity
    createUnityInstance(document.querySelector("#unity-canvas"), {
      dataUrl: "Build/6127fbba3e79cbcada24ba1ffd033f77.data",
      frameworkUrl: "Build/b0e5ec181474d494c6ff3c9ad9c3b1bd.js",
      codeUrl: "Build/fe2a5824416bebe1cc941510618103
